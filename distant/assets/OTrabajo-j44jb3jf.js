import{r as I,M as T,I as S,a,O,j as e,w as P,B as R,s as D,P as E,S as L}from"./index-r_yxv9AL.js";import y from"./FilaAbanico-nIj2i_6X.js";import{C as z}from"./ClientesLeer-J_VJC4ey.js";import{c as k}from"./ClientesLeerCod-PBufAd9Z.js";import{T as i}from"./TextField-KyvZr_kk.js";import{D as A}from"./DataGrid-_mhzC7gF.js";import{B as j}from"./Box-i0ndBvmY.js";import"./styles.module-2WklHWJX.js";import"./RadioGroup-ey9wJ9fG.js";import"./Checkbox-C-VidIdO.js";const F=t=>new Promise(l=>{const o=S+"/presupencableenro/?idPresupP="+t;I.get(o).set("Content-Type","application/json").then(n=>{const r=JSON.parse(n.text);l(r)}).catch(n=>{T(n)})}),M=t=>new Promise(l=>{setTimeout(()=>{const o=S+"/stkitemsleeabrrub/?abr="+t;I.get(o).set("Content-Type","application/json").then(n=>{const r=JSON.parse(n.text);l(r)}).catch(n=>{T(n)})},200)});async function W(t){return B()}function B(){return new Promise(function(t){t([{field:"id",headerName:"ID",width:90},{field:"idPresupRenglon",headerName:"ID Presup Renglon",width:150},{field:"PresupRenglonNroPresup",headerName:"Nro Presup",width:150},{field:"PresupRenglonCant",headerName:"Cantidad",width:130},{field:"PresupRenglonDesc",headerName:"Descripción",width:400},{field:"PresupRenglonLargo",headerName:"Largo",width:120},{field:"PresupRenglonAncho",headerName:"Ancho",width:120},{field:"PresupRenglonImpUnit",headerName:"Importe Unitario",width:180},{field:"PresupRenglonImpItem",headerName:"Importe Item",width:180},{field:"PresupRenglonParamInt",headerName:"Parámetros Internos",width:300}])})}function G(t){a.useContext(O);const[l,o]=a.useState([]),[n,r]=a.useState([]),{datospot:c}=t;console.log("datospot  ",c);let v,m;async function x(s){const u=await M(s);r(u)}a.useEffect(()=>{x(c.StkRubroAbr)},[c]);const h=[{id:"idItems",label:"Color",value:m,mapeo:e.jsxs(e.Fragment,{children:[e.jsx("option",{}),n.map(s=>e.jsx("option",{value:s.idStkItems,children:s.StkItemsDesc},s.idStkItems))]})}];async function b(){const s=await z();o(s)}let g;l.length>0&&(g=[{id:"idCliente",label:"Clientes",value:v,mapeo:e.jsxs(e.Fragment,{children:[e.jsx("option",{}),l.map(s=>e.jsx("option",{value:s.id,children:s.ClientesDesc},s.id))]})}]);const f=s=>{s.target.id,console.log(" event.target.value ",s.target.value),console.log(" event.target.id ",s.target.id)};async function C(s){s.target.id;const u=await k(s.target.value);console.log("datosnuevocliente  ",u),console.log(" event.target.value ",s.target.value),console.log(" event.target.id ",s.target.id)}return e.jsxs("div",{children:[e.jsxs(P,{item:!0,xs:1,children:[e.jsx(R,{onClick:b,children:"Cambia Cliente"}),l.length>0&&g.map(s=>e.jsx(i,{id:s.id,size:"small",inputProps:{maxLength:3},select:!0,label:s.label,value:s.value,onChange:C,SelectProps:{native:!0},variant:"outlined",margin:"dense",children:s.mapeo},s.id))]}),e.jsx(P,{item:!0,xs:1,children:h.map(s=>e.jsx(i,{id:s.id,size:"small",inputProps:{maxLength:3},select:!0,label:s.label,value:s.value,onChange:f,SelectProps:{native:!0},variant:"outlined",margin:"dense",children:s.mapeo},s.id))})]})}function U({data:t}){const[l,o]=a.useState([]),[n,r]=a.useState([]);a.useState(!1);const[c,v]=a.useState(0),[m,x]=a.useState(""),[h,b]=a.useState(""),g=t.flatMap(p=>p);async function f(){var p=await W();o(()=>p)}async function C(){r(g)}async function s(){C(),f()}a.useEffect(()=>{s()},[]);async function u(p){var N=p.row;const w=JSON.parse(N.PresupRenglonParamInt);x(w.tipopresup),b(w)}return e.jsxs("div",{style:{height:400,width:"100%"},children:[h!==void 0&&e.jsx(G,{datospot:h}),m==="PILETA ENROLLABLE"&&e.jsx(y,{}),m==="ABOLINADA"&&e.jsx(y,{}),e.jsx(A,{columnHeaderHeight:35,rows:n,columns:l,onCellClick:u,pageSize:5,rowsPerPageOptions:[5]},c)]})}const d=D(E)(({theme:t})=>({backgroundColor:t.palette.mode==="dark"?"#032a57":"#eaf3ff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary,flexGrow:3}));function J(){const{otdatos:t,setOTdatos:l}=a.useContext(O);async function o(){const n=await F(t.renglonespresup[0][0].PresupRenglonNroPresup);l({...t,datosencab:n})}if(a.useEffect(()=>{o()},[t.renglonespresup]),t.datosencab)return e.jsxs("div",{style:{width:2e3,padding:20},children:[e.jsxs(j,{height:50,width:1600,boxShadow:1,padding:1,my:4,display:"flex",alignItems:"center",gap:4,sx:{border:"2px solid grey"},children:[e.jsxs(d,{width:200,children:["Número de Presupuesto: ",t.datosencab[0][0].idPresupEncab]}),e.jsxs(d,{children:["Fecha: ",t.datosencab[0][0].PresupEncabFecha]}),e.jsxs(d,{children:["MayMin: ",t.datosencab[0][0].PresupEncabMayMin]}),e.jsxs(d,{children:["Total: ",t.datosencab[0][0].PresupEncabTotal]}),e.jsxs(d,{children:["Explicacion: ",t.datosencab[0][0].PresupEncabExplic]})]}),console.log("(otdatos.datosencab[1][0]  ",t.datosencab[1][0]),t.datosencab[1][0].idClientes&&e.jsxs(j,{height:50,width:1600,my:4,display:"flex",alignItems:"center",gap:4,p:2,sx:{border:"2px solid grey"},children:[e.jsx(i,{size:"small",id:"otdatos.datosencab[1][0].idClientes",label:"Número de Cliente",fullWidth:!0,value:t.datosencab[1][0].idClientes}),e.jsx(i,{size:"small",variant:"outlined",id:"datosencab[1][0].ClientesDesc",fullWidth:!0,label:"Cliente",value:t.datosencab[1][0].ClientesDesc}),e.jsx(i,{size:"small",id:"otdatos.OTDomicilio",label:"Domicilio",fullWidth:!0,value:t.datosencab[1][0].ClientesDomicilio}),e.jsx(i,{size:"small",id:"otdatos.OTCodPos",label:"CodPos",fullWidth:!0,value:t.datosencab[1][0].ClientesCodPos}),e.jsx(i,{size:"small",id:"otdatos.OTLocalidad",label:"Localidad",fullWidth:!0,value:t.datosencab[1][0].ClientesLoc}),e.jsx(i,{size:"small",id:"otdatos.OTPcia",label:"Pcia",fullWidth:!0,value:t.datosencab[1][0].ClientesPcia}),e.jsx(i,{size:"small",id:"otdatos.OTTel",label:"Tel",fullWidth:!0,value:t.datosencab[1][0].ClientesTel}),e.jsx(i,{size:"small",id:"otdatos.OTMail",label:"Mail",fullWidth:!0,value:t.datosencab[1][0].ClientesMail}),e.jsx(i,{size:"small",id:"otdatos.OTCUIT",label:"CUIT",fullWidth:!0,value:t.datosencab[1][0].ClientesCUIT})]})||e.jsxs(j,{height:50,width:1600,my:4,display:"flex",alignItems:"center",gap:4,p:2,sx:{border:"2px solid grey"},children:[e.jsxs(d,{children:["Cliente: ",t.datosencab[0]]})," "]}),e.jsx(U,{data:t.renglonespresup})]})}function ee(){const{setValor:t}=a.useContext(L);return a.useEffect(()=>{t("Orden de Trabajo")},[]),e.jsx("div",{children:e.jsx(P,{container:!0,rowSpacing:-15,spacing:2,alignItems:"center",children:e.jsx(J,{})})})}export{ee as default};
