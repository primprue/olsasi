import{r as T,I as O,a as l,x as S,j as t,w as f,R as N,M as W,t as Z,v as Q,h as $,y as K,z as x,S as X}from"./index-r_yxv9AL.js";import{T as b,F as E}from"./TextField-KyvZr_kk.js";import{R as y,a as D}from"./RadioGroup-ey9wJ9fG.js";import{s as Y}from"./styles.module-2WklHWJX.js";function ee(e){const n=e;return new Promise(c=>{const i=O+"/presupconftipoleerdesc/?descripcion="+n;T.get(i).set("Content-Type","application/json").then(a=>{const u=JSON.parse(a.text);c(u)})})}function te(e,n){return new Promise(c=>{const i=O+"/presupconftipoleeanexo/?anexo="+e+"&prodelab="+n;T.get(i).set("Content-Type","application/json").then(a=>{const u=JSON.parse(a.text);c(u)})})}function ae(){const{state:e,setState:n}=l.useContext(S);var c="N";const i=o=>{var m=o.target.value;n({...e,PresupConfTipoDesc:o.target.value}),a(m)};async function a(o){const m=await ee(o);n({...e,DatosPresupEleg:m})}async function u(o,m){n({...e,DescripPresup:""});const j=await te(o,m);n({...e,tipopresup:j})}l.useEffect(()=>{n({...e,DescripPresup:""}),e.tipopresup.length===0&&u(c,e.PresupProducto)},[e.tipopresup]),l.useEffect(()=>{u(c,e.PresupProducto)},[e.PresupProducto]);const h=[{id:"TipoConfeccion",label:"Confección",value:e.NroConfTipo,mapeo:t.jsxs(t.Fragment,{children:[t.jsx("option",{}),e.tipopresup.map(o=>t.jsx("option",{value:o.PresupConfTipoDesc,children:o.PresupConfTipoDesc},o.NroConfTipo))]})}];return t.jsx(t.Fragment,{children:t.jsx(f,{item:!0,children:h.map(o=>t.jsx(b,{id:o.id,size:"small",select:!0,label:o.label,margin:"dense",value:o.value,onChange:i,SelectProps:{native:!0},variant:"outlined",children:o.mapeo},o.id))})})}function ne(){const[e,n]=N.useState("mn"),{state:c,setState:i}=l.useContext(S),a=u=>{n(u.target.value),i({...c,PresupMnMy:u.target.value})};return t.jsx(t.Fragment,{children:t.jsxs(y,{row:!0,size:"small",name:"tipoCliente",value:e,onChange:a,margin:"dense",children:[t.jsx(f,{item:!0,xs:3,children:t.jsx(E,{value:"mn",control:t.jsx(D,{}),label:"Min.",labelPlacement:"top",margin:"dense"})}),t.jsx(f,{item:!0,xs:3,children:t.jsx(E,{value:"my",control:t.jsx(D,{}),label:"May.",labelPlacement:"top",margin:"dense"})})]})})}function oe(){const[e,n]=N.useState("CIVA"),{state:c,setState:i}=l.useContext(S),a=u=>{n(u.target.value),i({...c,PresupIVA:u.target.value})};return t.jsx(t.Fragment,{children:c.PresupMnMy==="mn"&&t.jsxs(y,{row:!0,size:"small",name:"tipoIVA",value:e,onChange:a,margin:"dense",children:[t.jsx(f,{item:!0,xs:4,children:t.jsx(E,{value:"CIVA",control:t.jsx(D,{}),label:"c/IVA",labelPlacement:"top",margin:"dense"})}),t.jsx(f,{item:!0,xs:4,children:t.jsx(E,{value:"SIVA",control:t.jsx(D,{}),label:"s/IVA",labelPlacement:"top",margin:"dense"})})]})})}function se(){const[e,n]=N.useState("PAE"),{state:c,setState:i}=l.useContext(S),a=u=>{n(u.target.value),i({...c,PresupProducto:u.target.value})};return t.jsx(t.Fragment,{children:t.jsxs(y,{row:!0,size:"small",name:"tipoProducto",value:e,onChange:a,margin:"dense",color:"primary",children:[t.jsx(f,{item:!0,xs:6,children:t.jsx(E,{value:"PE",control:t.jsx(D,{}),label:"Elab",labelPlacement:"top",margin:"dense"})}),t.jsx(f,{item:!0,xs:6,children:t.jsx(E,{value:"PAE",control:t.jsx(D,{}),label:"a-El.",labelPlacement:"top",margin:"dense"})})]})})}function re(){return t.jsxs(t.Fragment,{children:[t.jsx(ne,{}),t.jsx(oe,{}),t.jsx(se,{}),t.jsx(ae,{})]})}const ie=e=>new Promise(n=>{const c=O+"/stkrubroleerconf/"+e;T.get(c).set("Content-Type","application/json").then(i=>{const a=JSON.parse(i.text);n(a)}).catch(i=>console.log("codigo de error stkrubroleeconf que no es error",i))}),le=(e,n,c)=>{var i=e,a="",u="";return i===null||i===""||e.PresupConfTipoBack===null||e.PresupConfTipoBack===""||e.PresupConfTipoBack===" "?u=O+"/presupconftipocalc/?tipo="+c+"&datoscalculo="+n:(a=e.PresupConfTipoBack,u=O+a+"/?datoscalculo="+n,console.log("url  ",u)),new Promise((h,o)=>{T.get(u).set("Content-Type","application/json").then(m=>{const j=JSON.parse(m.text);h(j)}).catch(m=>{console.error("Error al hacer la solicitud:",m),o(m)})})},ce=()=>new Promise(e=>{setTimeout(()=>{const n=O+"/stkmonedasleerorig";T.get(n).set("Content-Type","application/json").then(c=>{const i=JSON.parse(c.text);e(i)}).catch(c=>W(c))},500)});var k={},ue=Q;Object.defineProperty(k,"__esModule",{value:!0});var w=k.default=void 0,de=ue(Z()),me=t,Ae=(0,de.default)((0,me.jsx)("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5 6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z"}),"Archive");w=k.default=Ae;const xe=(e,n,c)=>{let a={...{StkRubroAbr:e.StkRubroAbr,minmay:e.PresupMnMy,ivasn:e.PresupIVA,cantidad:e.PresupCantidad,detallep:e.DetallePresup,detaller:e.DetalleRenglon,largo:e.PresupLargo,ancho:e.PresupAncho,tipopresup:n,cotdivisa:c,signomonet:e.signomoneda}};return n==="CONFECCIONADA"&&(a.tipoconf=e.PresupCsSs,a.tipoojale=e.PresupOB),n==="TOLDO ABANICO"&&(a.cantbrazos=e.CantBrazos,a.largobrazo=e.LargoBrazo,a.voladosd=e.VolDS,a.altovolado=e.AltoVolado,a.fajabrazo=e.FajaBrazoEleg),n==="ABOLINADA"&&(a.tipoojale=e.PresupOB,a.presupojalesc=e.PresupOjalesC),n==="LONAS ENROLLABLES"&&(a.tamcristal=e.TamCristal,a.altovolado=e.AltoVolado,a.sobrantemarco=e.SobranteMarco),n==="CAMBIO PAÑO"&&(a.tipoconf=e.PresupCsSs,a.tipoojale=e.PresupOB,a.lonanuestraafuera=e.PreuspLNLF),n==="COMEDERO"&&(a.tipoojale=e.PresupOB,a.presupojalesc=e.PresupOjalesC,a.anchocomedero=e.AnchoComederoEleg),n==="LATERAL CORREDIZO"&&(a.cantHeb=e.CantHeb,a.tipoheb=e.tipoheb,a.cantCarro=e.CantCarro,a.tipocarro=e.tipocarro,a.cantPlaca=e.CantPlaca,a.tipoplaca=e.tipoplaca,a.colocacion=e.colocacion),n==="MODIFICA MEDIDAS"&&(a.tipoconf=e.PresupCsSs,a.tipoojale=e.PresupOB,a.largon=e.PresupLargoN,a.anchon=e.PresupAnchoN,a.lonanuestraafuera=e.PreuspLNLF),n==="PILETA ENROLLABLE"&&(a.drenajesn=e.PresupDrenaje,a.tipoojale=e.PresupOB),n==="BOLSON PARA TANQUE"&&(a.tipomedeleg=e.TipoMedidaEleg,a.termbordeeleg=e.TermBordeEleg,a.anchopared=e.AnchoPared,a.medida=e.Medida,a.alto=e.Alto),n==="PILETA CAÑOS ALUMINIO"&&(a.drenajesn=e.PresupDrenaje,a.tipoojale=e.PresupOB),n==="TOLDO BARRACUADRA"&&(a.tipomecanismo=e.TipoMecanismo,a.stkrubroabrtbr=e.StkRubroAbrTBR,a.altovolado=e.AltoVolado),a},fe=async(e,n,c,i,a,u,h,o)=>new Promise(m=>{setTimeout(()=>{var j=o[0].tipopresup,A="",v=0,I=0,P=0,r=0,d=0,g=0;if(c==="S"){var p="";e[0][0].StkRubroUM&&(p=e[0][0].StkRubroUM+" "),A=p+e[0][0].Detalle+e[0][0].StkRubroDesc,e[0][0].MDesc==="S"&&(A=A+" "+u+" "+o[0].detaller),g=e[0][0].ImpUnitario,a?(P=Number(Math.ceil(g/o[0].cotdivisa)).toFixed(2),d=Number(Math.ceil(g/o[0].cotdivisa)*i).toFixed(2)):(P=Number(Math.ceil(g)).toFixed(2),d=Number(Math.ceil(g*i)).toFixed(2)),v=e[0][0].Largo,I=e[0][0].Ancho,r=0,h.length!==0&&(a?r=h.ImpItemAnexo/o[0].cotdivisa:r=h.ImpItemAnexo,P=Number(Math.ceil(P*1+r)).toFixed(2),d=Number(Math.ceil(d*1+r*o[0].cantidad)).toFixed(2),A=A+h.StkRubroDesc),(v===0||I===0)&&(a?d=P/o[0].cotdivisa*1*o[0].veces:d=P*1*o[0].veces),v===0&&I===0&&(a?d=e[0][0].ImpUnitario/o[0].cotdivisa*i:d=e[0][0].ImpUnitario*i)}else A=j,a?(P=e[0]/o[0].cotdivisa,d=e[0]/o[0].cotdivisa*i):(P=e[0],d=e[0]*i);o[0].tipopresup==="MODIFICA MEDIDAS"&&(v="-",I="-");let L=(P*1).toLocaleString("es-AR",{style:"currency",currency:"ARS"}).replace(/ARS/g,o[0].signomonet).replace(/€|USD|\$/g,"").trim();L=o[0].signomonet+" "+L;let R=(d*1).toLocaleString("es-AR",{style:"currency",currency:"ARS"}).replace(/ARS/g,o[0].signomonet).replace(/€|USD|\$/g,"").trim();R=o[0].signomonet+" "+R;var s=[{id:n,PresupCantidad:o[0].cantidad,StkRubroDesc:A,PresupLargo:v,PresupAncho:I,ImpUnitario:P,ImpUnitariof:L,ImpItem:d,ImpItemf:R,dcalculo:o}];m(s)},1e3)}),Pe=l.lazy(()=>x(()=>import("./TablaPresup-WK69m0cB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]))),ge=l.lazy(()=>x(()=>import("./FilaConf-ezf23hPq.js"),__vite__mapDeps([20,1,2,18,5]))),he=l.lazy(()=>x(()=>import("./FilaEnrollables-SDv6hT9t.js"),__vite__mapDeps([21,1,2,18,5]))),ve=l.lazy(()=>x(()=>import("./FilaTanques-GU-yJxs7.js"),__vite__mapDeps([22,1,2,14,15,5]))),U=l.lazy(()=>x(()=>import("./FilaPiletasEnr-dGVK6v6I.js"),__vite__mapDeps([23,1,2,18,5]))),Ce=l.lazy(()=>x(()=>import("./FilaToldosExt-JCnoD72n.js"),__vite__mapDeps([24,1,2,14,15,18,5]))),je=l.lazy(()=>x(()=>import("./FilaDetDesc-lyIJEOBC.js"),__vite__mapDeps([25,1,2,14,15,5]))),Ie=l.lazy(()=>x(()=>import("./FilaCargaDesc-lgFHho2I.js"),__vite__mapDeps([26,1,2,14,15,5]))),be=l.lazy(()=>x(()=>import("./FilaAbolinada-_Fd123Vm.js"),__vite__mapDeps([27,1,2,14,15,5,18]))),Se=l.lazy(()=>x(()=>import("./FilaComedero-PZwxketN.js"),__vite__mapDeps([28,1,2,14,15,5,18]))),Oe=l.lazy(()=>x(()=>import("./FilaCambPanio-eB_ez2yH.js"),__vite__mapDeps([29,1,2,18,5]))),Ee=l.lazy(()=>x(()=>import("./FilaModMed-w6WJ25e3.js"),__vite__mapDeps([30,1,2,14,15,5,18]))),De=l.lazy(()=>x(()=>import("./FilaAbanico-nIj2i_6X.js"),__vite__mapDeps([31,1,2,14,15,5,18]))),Le=l.lazy(()=>x(()=>import("./FilaLateral-Q8dHawDG.js"),__vite__mapDeps([32,1,2,14,15,5,6])));function _e(){const{state:e,setState:n}=l.useContext(S),{datosrenglon:c,setDatosRenglon:i}=l.useContext(S),[a,u]=l.useState(!1),[h,o]=l.useState(!1),[m,j]=l.useState(0);let A="Largo",v="Ancho";if(e.DatosPresupEleg.length!==0){var I=e.DatosPresupEleg[0].PresupConfTipoLargo,P=e.DatosPresupEleg[0].PresupConfTipoAncho,r=e.DatosPresupEleg[0].PresupConfTipoDesc,d="";e.DatosPresupEleg[0].PresupConfTipoRubro==="VS"?d="S":d="N",(r==="LONAS ENROLLABLES"||r==="TOLDO BARRACUADRA"||r==="LATERAL CORREDIZO")&&(A="Alto"),r==="CARGA DESCRIPCION"&&(A="Importe"),r==="CAMBIO PISO PILETA"&&(A="Largo/Diametro"),r==="CAMBIO PAÑO"&&(v="Ancho Lona",A="Paños en metros"),r==="MODIFICA MEDIDAS"&&(v="Ancho Actual",A="Largo Actual")}const g=s=>{const C=s.target.id;n({...e,[C]:s.target.value}),C==="idStkMonedas"&&o(!0)},p=()=>{const s=e.monedasleidas.filter(C=>C.idStkMonedas===e.idStkMonedas);s.length>0&&(j(s[0].StkMonedasCotizacion),n({...e,signomoneda:s[0].StkMonedasSigno}),u(!0),o(!1))};async function M(s){const C=await ie(s);n({...e,stkrubro:C})}async function V(){const s=await ce();n({...e,monedasleidas:s})}l.useEffect(()=>{M(r==="UNIDAD"?"T":"S")},[r]),l.useEffect(()=>{p()},[h]),l.useEffect(()=>{V()},[]);async function L(){var s=e.indicetp+1;n({...e,indicetp:s});var C=e.PresupCantidad,F=[],q=e,J=await xe(q,r,m);F.push(J);var G=JSON.stringify(F);const H=await le(e.DatosPresupEleg[0],G,r);var B=await fe(H,s,d,C,a,e.DescripPresup,e.renglonanexo,F);e.renglonanexo.length!==0?(i([...c,e.renglonanexo]),i([...c,B[0]])):i([...c,B[0]])}const _=Y,z=[{id:"StkRubroAbr",label:"Rubro",value:e.StkRubroAbr,mapeo:t.jsxs(t.Fragment,{children:[t.jsx("option",{}),e.stkrubro.map(s=>t.jsx("option",{value:s.StkRubroAbr,children:s.StkRubroDesc},s.StkRubroAbr))]})}],R=[{id:"idStkMonedas",label:"Moneda",value:e.idStkMonedas,mapeo:t.jsxs(t.Fragment,{children:[t.jsx("option",{}),e.monedasleidas.map(s=>t.jsx("option",{value:s.idStkMonedas,children:s.StkMonedasDescripcion},s.idStkMonedas))]})}];return t.jsxs(t.Fragment,{children:[d==="S"&&e.stkrubro.length>0&&z.map(s=>t.jsx(b,{id:s.id,size:"small",inputProps:{maxLength:3},select:!0,label:s.label,value:s.value,onChange:g,SelectProps:{native:!0},variant:"outlined",margin:"dense",children:s.mapeo},s.id)),r==="PAÑO UNIDO"&&t.jsx(f,{item:!0,xs:1,children:t.jsx(b,{inputProps:{maxLength:5},size:"small",variant:"outlined",id:"PresupVeces",type:"number",label:"Veces",fullWidth:!0,margin:"dense",value:e.PresupVeces,onChange:g,className:_.textField})}),r!=="MODIFICA MEDIDAS"&&t.jsx(f,{item:!0,xs:1,children:t.jsx(b,{inputProps:{maxLength:5},size:"small",variant:"outlined",id:"PresupCantidad",type:"number",label:"Cantidad",fullWidth:!0,margin:"dense",value:e.PresupCantidad,onChange:g,className:_.textField})}),t.jsx(f,{item:!0,xs:1,children:t.jsx(b,{disabled:I==="N",inputProps:{maxLength:3},size:"small",variant:"outlined",id:"PresupLargo",type:"number",label:A,fullWidth:!0,margin:"dense",value:e.PresupLargo,onChange:g,className:_.textField})}),t.jsx(f,{item:!0,xs:1,children:t.jsx(b,{disabled:P==="N",inputProps:{maxLength:3},size:"small",variant:"outlined",id:"PresupAncho",type:"number",label:v,fullWidth:!0,margin:"dense",value:e.PresupAncho,onChange:g,className:_.textField})}),t.jsxs(f,{container:!0,item:!0,xs:12,children:[r==="CONFECCIONADA"&&t.jsx(ge,{}),r==="LONAS ENROLLABLES"&&t.jsx(he,{}),r==="TOLDO ABANICO"&&t.jsx(De,{}),r==="ABOLINADA"&&t.jsx(be,{}),r==="CAMBIO PAÑO"&&t.jsx(Oe,{}),r==="COMEDERO"&&t.jsx(Se,{}),r==="LATERAL CORREDIZO"&&t.jsx(Le,{}),r==="MODIFICA MEDIDAS"&&t.jsx(Ee,{}),r==="PILETA ENROLLABLE"&&t.jsx(U,{}),r==="BOLSON PARA TANQUE"&&t.jsx(ve,{}),r==="PILETA CAÑOS ALUMINIO"&&t.jsx(U,{}),r==="TOLDO BARRACUADRA"&&t.jsx(Ce,{}),r==="CARGA DESCRIPCION"?t.jsx(Ie,{}):t.jsx(t.Fragment,{}),r!=="UNIDAD"&&d==="S"?t.jsx(je,{presuptipo:r}):t.jsx(t.Fragment,{})]})," ",e.monedasleidas.length>0&&R.map(s=>t.jsx(b,{id:s.id,size:"small",inputProps:{maxLength:3},select:!0,label:s.label,value:s.value,onChange:g,SelectProps:{native:!0},variant:"outlined",margin:"dense",children:s.mapeo},s.id)),t.jsx(f,{container:!0,item:!0,xs:6,children:t.jsx($,{onClick:()=>L(),color:"primary",children:t.jsx(w,{style:{color:K[500]},fontSize:"large",titleAccess:"Agregar"})})}),t.jsx(l.Suspense,{fallback:t.jsx(t.Fragment,{children:"..."}),children:t.jsx(Pe,{data:c})})]})}function Re(){l.useContext(S);const{valor:e,setValor:n}=l.useContext(X);return l.useEffect(()=>{n("Presupuestos")},[]),t.jsxs(t.Fragment,{children:[t.jsx(re,{}),t.jsx(_e,{})]})}const Ne=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"}));export{Ne as i,te as l,le as p};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/TablaPresup-WK69m0cB.js","assets/index-r_yxv9AL.js","assets/index-KCRVdR-T.css","assets/esES-o6LdUFzd.js","assets/DataGrid-_mhzC7gF.js","assets/TextField-KyvZr_kk.js","assets/Checkbox-C-VidIdO.js","assets/esES-rgjKva3f.css","assets/ClientesLeerCod-PBufAd9Z.js","assets/columns-gM_PrAgX.js","assets/PresupDetPieLee-4Y-VDx8h.js","assets/PresupPreview-k5xZ7PUE.js","assets/Boton.module-EkP_IAWQ.js","assets/Boton-rbMmP9z0.css","assets/styles.module-2WklHWJX.js","assets/styles-V3YF3LhK.css","assets/Box-i0ndBvmY.js","assets/deepOrange-Ok8kdfPT.js","assets/RadioGroup-ey9wJ9fG.js","assets/TablaPresup--PD3crvH.css","assets/FilaConf-ezf23hPq.js","assets/FilaEnrollables-SDv6hT9t.js","assets/FilaTanques-GU-yJxs7.js","assets/FilaPiletasEnr-dGVK6v6I.js","assets/FilaToldosExt-JCnoD72n.js","assets/FilaDetDesc-lyIJEOBC.js","assets/FilaCargaDesc-lgFHho2I.js","assets/FilaAbolinada-_Fd123Vm.js","assets/FilaComedero-PZwxketN.js","assets/FilaCambPanio-eB_ez2yH.js","assets/FilaModMed-w6WJ25e3.js","assets/FilaAbanico-nIj2i_6X.js","assets/FilaLateral-Q8dHawDG.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
