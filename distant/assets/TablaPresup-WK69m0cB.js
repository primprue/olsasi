import{j as i,t as ee,v as te,R as U,a as w,r as pe,M as fe,I as xe,x as Y,B as Ie,h as dt,y as ve,C as me,ap as ft,A as vt}from"./index-r_yxv9AL.js";import{b as Se,D as Le,c as mt,e as ge,G as ze,d as gt}from"./esES-o6LdUFzd.js";import{s as ht,T as le}from"./TextField-KyvZr_kk.js";import{c as pt}from"./ClientesLeerCod-PBufAd9Z.js";import{l as xt}from"./columns-gM_PrAgX.js";import{P as St}from"./PresupDetPieLee-4Y-VDx8h.js";import{D as Ce,G as Ct}from"./DataGrid-_mhzC7gF.js";import{P as Be,d as yt}from"./PresupPreview-k5xZ7PUE.js";import{s as ke}from"./styles.module-2WklHWJX.js";import{p as bt,l as wt}from"./index-bthuEF5o.js";import{B as jt}from"./Box-i0ndBvmY.js";import{d as Dt}from"./deepOrange-Ok8kdfPT.js";import"./Checkbox-C-VidIdO.js";import"./Boton.module-EkP_IAWQ.js";import"./RadioGroup-ey9wJ9fG.js";const _t=ht("div")`
	white-space: normal;
	line-height: 1.2;
	max-height: 3.6em; /* Puedes ajustar esta altura según tu necesidad */
	overflow: hidden;
`;async function Nt(){return Vt()}function Vt(){return new Promise(function(e){e([{headerName:"Cant.",field:"PresupCantidad",width:10,headerAlign:"center"},{headerName:"Descripción",field:"StkRubroDesc",renderCell:t=>i.jsx(_t,{children:t.value}),width:700,headerAlign:"center",showCellVerticalBorder:!0},{headerName:"Largo",field:"PresupLargo",width:150,headerAlign:"center"},{headerName:"Ancho",field:"PresupAncho",width:150,headerAlign:"center"},{headerName:"Imp. Unit.",field:"ImpUnitariof",type:"number",alignItems:"right",width:220,headerAlign:"center"},{headerName:"Imp. Item.",field:"ImpItemf",type:"number",pattern:/^[0-9]{0,10}.[0-9]{0,2}$/,alignItems:"right",width:220,headerAlign:"center"},{headerName:"datospresup",field:"datoscalculos",hideable:!1}])})}var ye={},At=te;Object.defineProperty(ye,"__esModule",{value:!0});var He=ye.default=void 0,It=At(ee()),Pt=i,Rt=(0,It.default)((0,Pt.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm3.17-6.41a.9959.9959 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0L12 12.59l1.41-1.41c.39-.39 1.02-.39 1.41 0s.39 1.02 0 1.41L13.41 14l1.41 1.41c.39.39.39 1.02 0 1.41s-1.02.39-1.41 0L12 15.41l-1.41 1.41c-.39.39-1.02.39-1.41 0a.9959.9959 0 0 1 0-1.41L10.59 14l-1.42-1.41zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z"}),"DeleteForeverRounded");He=ye.default=Rt;var be={},Tt=te;Object.defineProperty(be,"__esModule",{value:!0});var we=be.default=void 0,Mt=Tt(ee()),Ft=i,Et=(0,Mt.default)((0,Ft.jsx)("path",{d:"M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-9.83-3.25.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25z"}),"AddShoppingCart");we=be.default=Et;var je={},Ot=te;Object.defineProperty(je,"__esModule",{value:!0});var Ge=je.default=void 0,$t=Ot(ee()),Lt=i,zt=(0,$t.default)((0,Lt.jsx)("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile");Ge=je.default=zt;var De={},Bt=te;Object.defineProperty(De,"__esModule",{value:!0});var Ue=De.default=void 0,kt=Bt(ee()),Pe=i,Ht=(0,kt.default)([(0,Pe.jsx)("path",{d:"M16.17 5H5v14h9.4l4.6-4.6V7.83L16.17 5zM12 18c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-8H6V6h9v4z",opacity:".3"},"0"),(0,Pe.jsx)("path",{d:"M21 12.4V7l-4-4H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h7.4l2-2H5V5h11.17L19 7.83v6.57l2-2zM15 15c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zM6 6h9v4H6V6zm13.99 10.25 1.77 1.77L16.77 23H15v-1.77l4.99-4.98zm3.26.26-.85.85-1.77-1.77.85-.85c.2-.2.51-.2.71 0l1.06 1.06c.2.2.2.52 0 .71z"},"1")],"SaveAsTwoTone");Ue=De.default=Ht;function qe(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a}var re;(function(e){e.event="event",e.props="prop"})(re||(re={}));function Z(){}function Gt(e){var t,a=void 0;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return t&&n.length===t.length&&n.every(function(o,l){return o===t[l]})||(t=n,a=e.apply(void 0,n)),a}}function ne(e){return!!(e||"").match(/\d/)}function Q(e){return e==null}function Ut(e){return typeof e=="number"&&isNaN(e)}function We(e){return Q(e)||Ut(e)||typeof e=="number"&&!isFinite(e)}function Ke(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function qt(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Wt(e,t,a){var n=qt(a),r=e.search(/[1-9]/);return r=r===-1?e.length:r,e.substring(0,r)+e.substring(r,e.length).replace(n,"$1"+t)}function Kt(e){var t=w.useRef(e);t.current=e;var a=w.useRef(function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return t.current.apply(t,n)});return a.current}function _e(e,t){t===void 0&&(t=!0);var a=e[0]==="-",n=a&&t;e=e.replace("-","");var r=e.split("."),o=r[0],l=r[1]||"";return{beforeDecimal:o,afterDecimal:l,hasNegation:a,addNegation:n}}function Zt(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var a=e.split("."),n=a[0].replace(/^0+/,"")||"0",r=a[1]||"";return(t?"-":"")+n+(r?"."+r:"")}function Ze(e,t,a){for(var n="",r=a?"0":"",o=0;o<=t-1;o++)n+=e[o]||r;return n}function Re(e,t){return Array(t+1).join(e)}function Je(e){var t=e+"",a=t[0]==="-"?"-":"";a&&(t=t.substring(1));var n=t.split(/[eE]/g),r=n[0],o=n[1];if(o=Number(o),!o)return a+r;r=r.replace(".","");var l=1+o,h=r.length;return l<0?r="0."+Re("0",Math.abs(l))+r:l>=h?r=r+Re("0",l-h):r=(r.substring(0,l)||"0")+"."+r.substring(l),a+r}function Te(e,t,a){if(["","-"].indexOf(e)!==-1)return e;var n=(e.indexOf(".")!==-1||a)&&t,r=_e(e),o=r.beforeDecimal,l=r.afterDecimal,h=r.hasNegation,y=parseFloat("0."+(l||"0")),C=l.length<=t?"0."+l:y.toFixed(t),b=C.split("."),g=o.split("").reverse().reduce(function(j,D,p){return j.length>p?(Number(j[0])+Number(D)).toString()+j.substring(1,j.length):D+j},b[0]),f=Ze(b[1]||"",t,a),v=h?"-":"",m=n?".":"";return""+v+g+m+f}function X(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var a=e.createTextRange();return a.move("character",t),a.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Xe=Gt(function(e,t){for(var a=0,n=0,r=e.length,o=t.length;e[a]===t[a]&&a<r;)a++;for(;e[r-1-n]===t[o-1-n]&&o-n>a&&r-n>a;)n++;return{from:{start:a,end:r-n},to:{start:a,end:o-n}}});function Jt(e,t,a){return Math.min(Math.max(e,t),a)}function de(e){return Math.max(e.selectionStart,e.selectionEnd)}function Xt(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Qt(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Yt(e){var t=e.currentValue,a=e.formattedValue,n=e.currentValueIndex,r=e.formattedValueIndex;return t[n]===a[r]}function ea(e,t,a,n,r,o,l){l===void 0&&(l=Yt);var h=r.findIndex(function(k){return k}),y=e.slice(0,h);!t&&!a.startsWith(y)&&(t=y,a=y+a,n=n+y.length);for(var C=a.length,b=e.length,g={},f=new Array(C),v=0;v<C;v++){f[v]=-1;for(var m=0,j=b;m<j;m++){var D=l({currentValue:a,lastValue:t,formattedValue:e,currentValueIndex:v,formattedValueIndex:m});if(D&&g[m]!==!0){f[v]=m,g[m]=!0;break}}}for(var p=n;p<C&&(f[p]===-1||!o(a[p]));)p++;var P=p===C||f[p]===-1?b:f[p];for(p=n-1;p>0&&f[p]===-1;)p--;var F=p===-1||f[p]===-1?0:f[p]+1;return F>P?P:n-F<P-n?F:P}function Me(e,t,a,n){var r=e.length;if(t=Jt(t,0,r),n==="left"){for(;t>=0&&!a[t];)t--;t===-1&&(t=a.indexOf(!0))}else{for(;t<=r&&!a[t];)t++;t>r&&(t=a.lastIndexOf(!0))}return t===-1&&(t=r),t}function ta(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),a=0,n=t.length;a<n;a++)t[a]=!!(ne(e[a])||ne(e[a-1]));return t}function Qe(e,t,a,n,r,o){o===void 0&&(o=Z);var l=Kt(function(m,j){var D,p;return We(m)?(p="",D=""):typeof m=="number"||j?(p=typeof m=="number"?Je(m):m,D=n(p)):(p=r(m,void 0),D=n(p)),{formattedValue:D,numAsString:p}}),h=w.useState(function(){return l(Q(e)?t:e,a)}),y=h[0],C=h[1],b=function(m,j){m.formattedValue!==y.formattedValue&&C({formattedValue:m.formattedValue,numAsString:m.value}),o(m,j)},g=e,f=a;Q(e)&&(g=y.numAsString,f=!0);var v=l(g,f);return w.useMemo(function(){C(v)},[v.formattedValue]),[y,b]}function aa(e){return e.replace(/[^0-9]/g,"")}function ra(e){return e}function na(e){var t=e.type;t===void 0&&(t="text");var a=e.displayType;a===void 0&&(a="input");var n=e.customInput,r=e.renderText,o=e.getInputRef,l=e.format;l===void 0&&(l=ra);var h=e.removeFormatting;h===void 0&&(h=aa);var y=e.defaultValue,C=e.valueIsNumericString,b=e.onValueChange,g=e.isAllowed,f=e.onChange;f===void 0&&(f=Z);var v=e.onKeyDown;v===void 0&&(v=Z);var m=e.onMouseUp;m===void 0&&(m=Z);var j=e.onFocus;j===void 0&&(j=Z);var D=e.onBlur;D===void 0&&(D=Z);var p=e.value,P=e.getCaretBoundary;P===void 0&&(P=ta);var F=e.isValidInputCharacter;F===void 0&&(F=ne);var k=e.isCharacterSame,N=qe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),L=Qe(p,y,!!C,l,h,b),q=L[0],_=q.formattedValue,B=q.numAsString,G=L[1],H=w.useRef({formattedValue:_,numAsString:B}),K=function(s,d){H.current={formattedValue:s.formattedValue,numAsString:s.value},G(s,d)},W=w.useState(!1),J=W[0],x=W[1],c=w.useRef(null),u=w.useRef({setCaretTimeout:null,focusTimeout:null});w.useEffect(function(){return x(!0),function(){clearTimeout(u.current.setCaretTimeout),clearTimeout(u.current.focusTimeout)}},[]);var V=l,I=function(s,d){var S=parseFloat(d);return{formattedValue:s,value:d,floatValue:isNaN(S)?void 0:S}},R=function(s,d,S){s.selectionStart===0&&s.selectionEnd===s.value.length||(X(s,d),u.current.setCaretTimeout=setTimeout(function(){s.value===S&&s.selectionStart!==s.selectionEnd&&X(s,d)},0))},E=function(s,d,S){return Me(s,d,P(s),S)},z=function(s,d,S){var T=P(d),M=ea(d,_,s,S,T,F,k);return M=Me(d,M,T),M},ie=function(s){var d=s.formattedValue;d===void 0&&(d="");var S=s.input,T=s.setCaretPosition;T===void 0&&(T=!0);var M=s.source,A=s.event,O=s.numAsString,$=s.caretPos;if(S){if($===void 0&&T){var ae=s.inputValue||S.value,ce=de(S);S.value=d,$=z(ae,d,ce)}S.value=d,T&&$!==void 0&&R(S,$,d)}d!==_&&K(I(d,O),{event:A,source:M})};w.useEffect(function(){var s=H.current,d=s.formattedValue,S=s.numAsString;_!==d&&(_!==B||d!==S)&&K(I(_,B),{event:void 0,source:re.props})},[_,B]);var ue=c.current?de(c.current):void 0,oe=typeof window<"u"?w.useLayoutEffect:w.useEffect;oe(function(){var s=c.current;if(_!==H.current.formattedValue&&s){var d=z(H.current.formattedValue,_,ue);s.value=_,R(s,d,_)}},[_]);var rt=function(s,d,S){var T=Xe(_,s),M=Object.assign(Object.assign({},T),{lastValue:_}),A=h(s,M),O=V(A);if(A=h(O,void 0),g&&!g(I(O,A))){var $=d.target,ae=de($),ce=z(s,_,ae);return $.value=_,R($,ce,_),!1}return ie({formattedValue:O,numAsString:A,inputValue:s,event:d,source:S,setCaretPosition:!0,input:d.target}),!0},nt=function(s){var d=s.target,S=d.value,T=rt(S,s,re.event);T&&f(s)},it=function(s){var d=s.target,S=s.key,T=d.selectionStart,M=d.selectionEnd,A=d.value;A===void 0&&(A="");var O;if(S==="ArrowLeft"||S==="Backspace"?O=Math.max(T-1,0):S==="ArrowRight"?O=Math.min(T+1,A.length):S==="Delete"&&(O=T),O===void 0||T!==M){v(s);return}var $=O;if(S==="ArrowLeft"||S==="ArrowRight"){var ae=S==="ArrowLeft"?"left":"right";$=E(A,O,ae),$!==O&&s.preventDefault()}else S==="Delete"&&!F(A[O])?$=E(A,O,"right"):S==="Backspace"&&!F(A[O])&&($=E(A,O,"left"));$!==O&&R(d,$,A),s.isUnitTestRun&&R(d,$,A),v(s)},ot=function(s){var d=s.target,S=d.selectionStart,T=d.selectionEnd,M=d.value;if(M===void 0&&(M=""),S===T){var A=E(M,S);A!==S&&R(d,A,M)}m(s)},lt=function(s){s.persist&&s.persist();var d=s.target;c.current=d,u.current.focusTimeout=setTimeout(function(){var S=d.selectionStart,T=d.selectionEnd,M=d.value;M===void 0&&(M="");var A=E(M,S);A!==S&&!(S===0&&T===M.length)&&R(d,A,M),j(s)},0)},st=function(s){c.current=null,clearTimeout(u.current.focusTimeout),clearTimeout(u.current.setCaretTimeout),D(s)},ut=J&&Xt()?"numeric":void 0,Ae=Object.assign({inputMode:ut},N,{type:t,value:_,onChange:nt,onKeyDown:it,onMouseUp:ot,onFocus:lt,onBlur:st});if(a==="text")return r?U.createElement(U.Fragment,null,r(_,N)||null):U.createElement("span",Object.assign({},N,{ref:o}),_);if(n){var ct=n;return U.createElement(ct,Object.assign({},Ae,{ref:o}))}return U.createElement("input",Object.assign({},Ae,{ref:o}))}function Fe(e,t){var a=t.decimalScale,n=t.fixedDecimalScale,r=t.prefix;r===void 0&&(r="");var o=t.suffix;o===void 0&&(o="");var l=t.allowNegative,h=t.thousandsGroupStyle;if(h===void 0&&(h="thousand"),e===""||e==="-")return e;var y=se(t),C=y.thousandSeparator,b=y.decimalSeparator,g=a!==0&&e.indexOf(".")!==-1||a&&n,f=_e(e,l),v=f.beforeDecimal,m=f.afterDecimal,j=f.addNegation;return a!==void 0&&(m=Ze(m,a,!!n)),C&&(v=Wt(v,C,h)),r&&(v=r+v),o&&(m=m+o),j&&(v="-"+v),e=v+(g&&b||"")+m,e}function se(e){var t=e.decimalSeparator;t===void 0&&(t=".");var a=e.thousandSeparator,n=e.allowedDecimalSeparators;return a===!0&&(a=","),n||(n=[t,"."]),{decimalSeparator:t,thousandSeparator:a,allowedDecimalSeparators:n}}function ia(e,t){e===void 0&&(e="");var a=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),r=a.test(e),o=n.test(e);return e=e.replace(/-/g,""),r&&!o&&t&&(e="-"+e),e}function oa(e,t){return new RegExp("(^-)|[0-9]|"+Ke(e),t?"g":void 0)}function la(e,t,a){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(a!=null&&a.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function sa(e,t,a){var n;t===void 0&&(t=Qt(e));var r=a.allowNegative,o=a.prefix;o===void 0&&(o="");var l=a.suffix;l===void 0&&(l="");var h=a.decimalScale,y=t.from,C=t.to,b=C.start,g=C.end,f=se(a),v=f.allowedDecimalSeparators,m=f.decimalSeparator,j=e[g]===m;if(ne(e)&&(e===o||e===l)&&t.lastValue==="")return e;if(g-b===1&&v.indexOf(e[b])!==-1){var D=h===0?"":m;e=e.substring(0,b)+D+e.substring(b+1,e.length)}var p=function(u,V,I){var R=!1,E=!1;o.startsWith("-")?R=!1:u.startsWith("--")?(R=!1,E=!0):l.startsWith("-")&&u.length===l.length?R=!1:u[0]==="-"&&(R=!0);var z=R?1:0;return E&&(z=2),z&&(u=u.substring(z),V-=z,I-=z),{value:u,start:V,end:I,hasNegation:R}},P=p(e,b,g),F=P.hasNegation;n=P,e=n.value,b=n.start,g=n.end;var k=p(t.lastValue,y.start,y.end),N=k.start,L=k.end,q=k.value,_=e.substring(b,g);e.length&&q.length&&(N>q.length-l.length||L<o.length)&&!(_&&l.startsWith(_))&&(e=q);var B=0;e.startsWith(o)?B+=o.length:b<o.length&&(B=b),e=e.substring(B),g-=B;var G=e.length,H=e.length-l.length;e.endsWith(l)?G=H:(g>H||g>e.length-l.length)&&(G=g),e=e.substring(0,G),e=ia(F?"-"+e:e,r),e=(e.match(oa(m,!0))||[]).join("");var K=e.indexOf(m);e=e.replace(new RegExp(Ke(m),"g"),function(u,V){return V===K?".":""});var W=_e(e,r),J=W.beforeDecimal,x=W.afterDecimal,c=W.addNegation;return C.end-C.start<y.end-y.start&&J===""&&j&&!parseFloat(x)&&(e=c?"-":""),e}function ua(e,t){var a=t.prefix;a===void 0&&(a="");var n=t.suffix;n===void 0&&(n="");var r=Array.from({length:e.length+1}).map(function(){return!0}),o=e[0]==="-";r.fill(!1,0,a.length+(o?1:0));var l=e.length;return r.fill(!1,l-n.length+1,l+1),r}function ca(e){var t=se(e),a=t.thousandSeparator,n=t.decimalSeparator,r=e.prefix;r===void 0&&(r="");var o=e.allowNegative;if(o===void 0&&(o=!0),a===n)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+a+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+n+` (default value for decimalSeparator is .)
     `);return r.startsWith("-")&&o&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+r+`
      allowNegative: `+o+`
    `),o=!1),Object.assign(Object.assign({},e),{allowNegative:o})}function da(e){e=ca(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,a=e.allowNegative,n=e.allowLeadingZeros,r=e.onKeyDown;r===void 0&&(r=Z);var o=e.onBlur;o===void 0&&(o=Z);var l=e.thousandSeparator,h=e.decimalScale,y=e.fixedDecimalScale,C=e.prefix;C===void 0&&(C="");var b=e.defaultValue,g=e.value,f=e.valueIsNumericString,v=e.onValueChange,m=qe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),j=se(e),D=j.decimalSeparator,p=j.allowedDecimalSeparators,P=function(c){return Fe(c,e)},F=function(c,u){return sa(c,u,e)},k=Q(g)?b:g,N=f??la(k,C,t);Q(g)?Q(b)||(N=N||typeof b=="number"):N=N||typeof g=="number";var L=function(c){return We(c)?c:(typeof c=="number"&&(c=Je(c)),N&&typeof h=="number"?Te(c,h,!!y):c)},q=Qe(L(g),L(b),!!N,P,F,v),_=q[0],B=_.numAsString,G=_.formattedValue,H=q[1],K=function(c){var u=c.target,V=c.key,I=u.selectionStart,R=u.selectionEnd,E=u.value;if(E===void 0&&(E=""),I!==R){r(c);return}V==="Backspace"&&E[0]==="-"&&I===C.length+1&&a&&X(u,1),h&&y&&(V==="Backspace"&&E[I-1]===D?(X(u,I-1),c.preventDefault()):V==="Delete"&&E[I]===D&&c.preventDefault()),p!=null&&p.includes(V)&&E[I]===D&&X(u,I+1);var z=l===!0?",":l;V==="Backspace"&&E[I-1]===z&&X(u,I-1),V==="Delete"&&E[I]===z&&X(u,I+1),r(c)},W=function(c){var u=B;if(u.match(/\d/g)||(u=""),n||(u=Zt(u)),y&&h&&(u=Te(u,h,y)),u!==B){var V=Fe(u,e);H({formattedValue:V,value:u,floatValue:parseFloat(u)},{event:c,source:re.event})}o(c)},J=function(c){return c===D?!0:ne(c)},x=function(c){var u=c.currentValue,V=c.lastValue,I=c.formattedValue,R=c.currentValueIndex,E=c.formattedValueIndex,z=u[R],ie=I[E],ue=Xe(V,u),oe=ue.to;return R>=oe.start&&R<oe.end&&p&&p.includes(z)&&ie===D?!0:z===ie};return Object.assign(Object.assign({},m),{value:G,valueIsNumericString:!1,isValidInputCharacter:J,isCharacterSame:x,onValueChange:H,format:P,removeFormatting:F,getCaretBoundary:function(c){return ua(c,e)},onKeyDown:K,onBlur:W})}function fa(e){var t=da(e);return U.createElement(na,Object.assign({},t))}function Ye(e){const{inputRef:t,onChange:a,...n}=e;return i.jsx(fa,{...n,getInputRef:t,onValueChange:r=>{a({target:{name:e.name,value:r.value}})},thousandSeparator:!0,prefix:"$ "})}const va="_tfselect_fcls8_1",ma="_tfmed_fcls8_8",ga="_tfcurrency_fcls8_15",he={tfselect:va,tfmed:ma,tfcurrency:ga};function et(){return new Promise(function(e){setTimeout(()=>{const t=xe+"/clientesleerdesc";pe.get(t).set("Content-Type","application/json").then(a=>{const n=JSON.parse(a.text);e(n)}).catch(a=>fe(a))})},500)}var Ee=0;const ha=(e,t,a,n,r)=>new Promise(o=>{const l=xe+"/presupgraba";pe.post(l).set("Content-Type","application/json").send({DatosPresup:e}).send({maymin:t}).send({nomCliente:a}).send({idClientes:n}).send({explicacionPresup:r}).set("X-API-Key","foobar").then(h=>{Ee=JSON.parse(h.text).insertId,o(Ee)})}).catch(o=>console.log("codigo de error presupgrabar que no es error",o)),pa=(e,t,a,n,r,o,l,h,y,C,b)=>{const g=xe+"/imppresup";pe.post(g).set("Content-Type","application/json").send({datospresup:e}).send({nomCliente:t}).send({otraCondicion:a}).send({suma:n}).send({nroPresupuesto:r}).send({descrip:o}).send({condpagoeleg:l}).send({PresupMnMy:h}).send({Tlargo:y}).send({Tancho:C}).send({dolaressn:b}).set("X-API-Key","foobar").then(f=>{fe(f)}).catch(f=>{fe(f)})};function xa(){const{state:e,setState:t}=w.useContext(Y),[a,n]=w.useState([]),[r,o]=w.useState([]);async function l(){const f=await xt();n(()=>f)}async function h(){const f=await St();o(f)}async function y(){l(),h()}w.useEffect(()=>{y()},[]);const[C,b]=w.useState([]),g=f=>{const v=f.map((m,j)=>r.filter(D=>D.id==m));b(v),t({...e,condpagoeleg:v})};return i.jsx("div",{children:i.jsx(Ce,{rows:r,columns:a,checkboxSelection:!0,onRowSelectionModelChange:g,selectionModel:C,localeText:Se.components.MuiDataGrid.defaultProps.localeText})})}function Sa(){const{state:e,setState:t}=w.useContext(Y),a=l=>{const h=l.target.id;t({...e,[h]:l.target.value})};async function n(){const l=await et(e.ClientesDesc);t({...e,clientes:l})}w.useEffect(()=>{n()},[]);const r=[{id:"idClientes",value:e.idClientes,mapeo:i.jsxs(i.Fragment,{children:[i.jsx("option",{}),i.jsx("option",{}),e.clientes.map(l=>i.jsx("option",{value:l.idClientes,children:l.ClientesDesc},l.idClientes))]})}],o=ke;return i.jsxs(i.Fragment,{children:[i.jsx("h3",{children:"Cliente Presupuesto"}),i.jsx(le,{inputProps:{maxLength:45},size:"small",variant:"outlined",id:"nomCliente",type:"text",label:"Nombre Cliente Ocacional",fullWidth:!0,margin:"dense",value:e.nomCliente,onChange:a,className:o.textField}),i.jsx("h5",{children:"Cliente Existente"}),r.map(l=>i.jsx(le,{id:l.id,size:"small",inputProps:{maxLength:20},select:!0,label:l.label,value:l.value,onChange:a,SelectProps:{native:!0},variant:"outlined",fullWidth:!0,children:l.mapeo},l.id))]})}function Ca(e){const{state:t,setState:a}=w.useContext(Y),[n,r]=w.useState({ppreview:!1}),o=g=>{const f=g.target.id;a({...t,[f]:g.target.value})},l=200;async function h(){const g=await et(t.ClientesDesc);a({...t,clientes:g})}w.useEffect(()=>{h()},[]);async function y(){var g=t.PresupMnMy,f,v,m=t.DescripPresup,j=t.otraCondicion,D=t.ExplicaPresup;t.idClientes===0||t.idClientes===""?(f=0,v=t.nomCliente):(f=t.idClientes,v=(await pt(f))[0].ClientesDesc);const p=await ha(e,g,v,f,D);a({...t,NroPresupuesto:p}),pa(e.datos,v,j,e.suma,p,m,t.condpagoeleg,t.PresupMnMy,t.labellargo,t.labelancho,t.dolaressn),C()}function C(){e.setOpen({filacuatro:!1})}const b=ke;return i.jsx(i.Fragment,{children:i.jsxs(Le,{fullWidth:!0,maxWidth:"md",open:e.open,children:[i.jsx(xa,{}),i.jsx(le,{inputProps:{maxLength:l},size:"small",variant:"outlined",id:"otraCondicion",type:"text",label:"Otra Condición",fullWidth:!0,margin:"dense",value:t.otraCondicion,onChange:o,className:b.textField,helperText:`Cantidad de caracteres ${t.otraCondicion.length}/${l}`}),i.jsx(Sa,{}),i.jsx(Be,{open:n.ppreview,setOpen:r}),i.jsxs(mt,{children:[i.jsx(Ie,{onClick:C,color:"secondary",children:"Cancelar"}),i.jsx(Ie,{onClick:y,color:"primary",autoFocus:!0,children:"Graba Presupuesto"})]})]})})}async function ya(){return new Promise(function(e){e([{headerName:"Descripción",field:"PresupConfTipoDesc",type:"text",required:!1,editable:!1,cellClassName:"estilotabla.multiline-cell",width:250},{headerName:"Cantidad",field:"AnexoMedida",editable:!0,type:"number",width:100,align:"right"},{headerName:"Imp. Unitario",field:"importea",type:"currency",width:130,required:!1,editable:!1,align:"right",renderCell:t=>i.jsxs("div",{style:{textAlign:"right"},children:[t.value&&`$ ${t.value}`," "]})},{headerName:"Imp. Total",field:"importet",type:"currency",width:130,required:!1,editable:!1,align:"right",renderCell:t=>i.jsxs("div",{style:{textAlign:"right"},children:[t.value&&`$ ${t.value}`," "]})},{headerName:"Imprime",field:"PresupConfTipoImprime",width:100,required:!1,editable:!1,align:"right"}])})}var Ne={},ba=te;Object.defineProperty(Ne,"__esModule",{value:!0});var tt=Ne.default=void 0,wa=ba(ee()),ja=i,Da=(0,wa.default)((0,ja.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");tt=Ne.default=Da;var Ve={},_a=te;Object.defineProperty(Ve,"__esModule",{value:!0});var at=Ve.default=void 0,Na=_a(ee()),Va=i,Aa=(0,Na.default)((0,Va.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM7.83 16 5 13.17l1.41-1.41 1.41 1.41 3.54-3.54 1.41 1.41L7.83 16zm9.58-3L19 14.59 17.59 16 16 14.41 14.41 16 13 14.59 14.59 13 13 11.41 14.41 10 16 11.59 17.59 10 19 11.41 17.41 13z"}),"RuleFolder");at=Ve.default=Aa;const Ia="_dialogo_1mb9m_1",Pa="_dialogocontenido_1mb9m_7",Ra="_dialogotitulo_1mb9m_13",Ta="_dialogoanexo_1mb9m_21",Ma="_h3_1mb9m_29",Fa="_h4_1mb9m_38",Oe={dialogo:Ia,dialogocontenido:Pa,dialogotitulo:Ra,dialogoanexo:Ta,h3:Ma,h4:Fa};let $e=0;function Ea(e){const{state:t,setState:a}=w.useContext(Y),[n,r]=w.useState([]),[o,l]=U.useState(null),[h,y]=w.useState([]),[C,b]=U.useState(0),[g,f]=U.useState();U.useState(0);const[v,m]=w.useState([]);async function j(){const x=await ya();r(()=>x)}async function D(){const x=await wt("S","");y(x)}var p=[{StkRubroAbr:t.StkRubroAbr,minmay:t.PresupMnMy,cantidad:t.PresupCantidad,largo:t.PresupLargo,ancho:t.PresupAncho,tipoconf:t.PresupCsSs,tipoojale:t.PresupOB,ivasn:t.PresupIVA}];function P(){for(var x="",c=0,u=0;u<v.length;)c=c+v[u].importet,v[u].PresupConfTipoImprime==="S"&&(x=x+" c/"+v[u].AnexoMedida+" "+v[u].PresupConfTipoDesc),u++;b(c);var V=[{StkRubroDesc:x,ImpItemAnexo:c}];a({...t,renglonanexo:V[0]})}function F(){e.setOpen({anexos:!1})}function k(){a({...t,renglonanexo:[]}),e.setOpen({anexos:!1})}async function N(){j(),D()}const L=()=>{const x=v.filter(c=>c.id!==G.id);m(x),H("")};w.useEffect(()=>{N()},[]);function q(){return i.jsxs(ze,{children:[J.map(x=>i.jsx(le,{id:x.id,size:"small",inputProps:{maxLength:3},select:!0,label:x.label,value:x.value,onChange:_,SelectProps:{native:!0},className:he.tfselect,children:x.mapeo},x.id)),i.jsx(we,{onClick:P,style:{color:me[500]},fontSize:"medium",titleAccess:"Suma Anexo"}),i.jsx(Ye,{size:"small",label:"Total",value:C,className:he.tfcurrency}),i.jsx(at,{onClick:F,style:{color:me[500]},fontSize:"medium",titleAccess:"Cierra y Suma Anexos"}),i.jsx(yt,{onClick:k,style:{color:ve[500]},fontSize:"medium",titleAccess:"Cierra no Suma Anexos"})]})}async function _(x){$e++;var c=x.target.value,u=JSON.stringify(p);const V=await bt("",u,c);f(V);const I={id:$e,PresupConfTipoDesc:x.target.value,AnexoMedida:1,importea:V[0],PresupConfTipoImprime:V[1],importet:V[0]};m([...v,I])}const B=x=>{const c=v.map(u=>u.id===x.id?{...u,importet:x.importea*x.AnexoMedida,AnexoMedida:x.AnexoMedida}:u);m(c)},[G,H]=w.useState(null),K=x=>{H(x.row)},W=U.useCallback(x=>{l({children:x.message,severity:"error"})},[]),J=[{id:"AnexoEleg",label:"Anexo",value:t.NroConfTipo,mapeo:i.jsxs(i.Fragment,{children:[i.jsx("option",{}),h.map(x=>i.jsx("option",{value:x.PresupConfTipoDesc,children:x.PresupConfTipoDesc},x.NroConfTipo))]})}];return i.jsx(i.Fragment,{children:i.jsx(Le,{open:e.open,maxWidth:"xl",className:Oe.dialogoanexo,children:i.jsx(jt,{open:e.open,className:ge.tablaanexo,children:i.jsxs("div",{className:ge.tablaanexo,children:[i.jsxs("h4",{className:Oe.h4,children:["Anexo Seleccionado :",i.jsx("b",{children:" "}),G&&i.jsxs(i.Fragment,{children:[G.PresupConfTipoDesc,",",i.jsx(dt,{onClick:L,children:i.jsx(tt,{style:{color:ve[500]},fontSize:"medium",titleAccess:"Borra Seleccionado"})})]})]}),i.jsx(Ce,{disableColumnMenu:!0,rows:v,columns:n,autoHeight:!0,localeText:Se.components.MuiDataGrid.defaultProps.localeText,onProcessRowUpdateError:W,processRowUpdate:x=>B(x),onRowClick:K,slots:{toolbar:q},initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},pageSizeOptions:[10,10]})]})})})})}function Qa(e){const{state:t}=w.useContext(Y),{datosrenglon:a,setDatosRenglon:n}=w.useContext(Y),[r,o]=w.useState({anexos:!1}),[l,h]=w.useState({ppreview:!1}),[y,C]=w.useState({filacuatro:!1}),[b,g]=w.useState([]);async function f(){var N=await Nt();g(()=>N)}const[v,m]=w.useState(0),j=()=>{F.length!==0&&F.map(N=>n(a.filter(L=>L.id!==N)))};w.useEffect(()=>{f()},[a]);function D(){return i.jsxs(ze,{className:ge.tablapresupuestoslot,children:[t.renglonanexo.length!==0&&i.jsx("h3",{children:"Tiene Anexos"}),i.jsx(Ye,{id:"Total",size:"small",label:"Total",value:v,className:he.tfcurrency}),i.jsx("b",{}),i.jsx("b",{}),i.jsx("b",{}),i.jsx("b",{}),i.jsx(Ct,{}),i.jsx(He,{onClick:j,style:{color:ve[500]},fontSize:"medium",titleAccess:"Borrar"}),i.jsx(we,{onClick:p,style:{color:me[500]},fontSize:"medium",titleAccess:"Sumar"}),i.jsx(Ge,{onClick:()=>o({anexos:!0}),style:{color:ft[500]},fontSize:"medium",titleAccess:"Sumar"}),i.jsx(Ue,{onClick:()=>C({filacuatro:!0}),style:{color:Dt[500]},fontSize:"medium",titleAccess:"Grabar"}),i.jsx(gt,{onClick:()=>h({ppreview:!0}),style:{color:vt[500]},fontSize:"medium",titleAccess:"Imprimir"})]})}const p=()=>{for(var N=0,L=0;L<a.length;)N=N*1+a[L].ImpItem*1,L++;m(N)},P=()=>{C(!1)},[F,k]=U.useState([]);return i.jsxs("div",{children:[i.jsx("div",{style:{height:300,width:"100%"},children:a!==void 0?i.jsx(Ce,{rows:a,columns:b.filter(N=>N.headerName!=="datospresup"),...a,onRowSelectionModelChange:N=>{k(N)},autoHeight:!0,localeText:Se.components.MuiDataGrid.defaultProps.localeText,shape:"rounded",slots:{toolbar:D}}):""}),i.jsx(Ea,{open:r.anexos,setOpen:o}),";",i.jsx(Be,{open:l.ppreview,setOpen:h}),i.jsx(Ca,{open:y.filacuatro,datos:a,maymin:e.maymin,suma:v,setOpen:C,handleClose:P})]})}export{Qa as default};
